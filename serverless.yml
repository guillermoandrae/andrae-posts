service: app

provider:
  name: aws
  region: us-east-1
  runtime: provided.al2

plugins:
  - ./vendor/bref/bref

functions:
  andrae-posts:
    handler: ./bin/index.php
    description: "Posts API"
    layers:
      - ${bref:layer.php-81}
    name: andrae-posts
    role: arn:aws:iam::${{ secrets.AWS_ACCOUNT_ID }}:role/${{ secrets.AWS_ROLE_NAME }}

# Exclude files from deployment
package:
  exclude:
    - 'tests/**'